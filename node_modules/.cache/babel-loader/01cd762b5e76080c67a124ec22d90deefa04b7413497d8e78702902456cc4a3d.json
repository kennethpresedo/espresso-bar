{"ast":null,"code":"import * as usersAPI from './users-api';\nexport async function signUp(userData) {\n  // Delete the network request code to the\n  // users-api.js module which will ultimately\n  // return the JWT\n  const token = await usersAPI.signUp(userData);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport async function login(credentials) {\n  const token = await usersAPI.login(credentials);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\nexport function getToken() {\n  const token = localStorage.getItem('token');\n  // getItem will return null if no key\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split('.')[1]));\n  // A JWT's expiration is expressed in seconds, not miliseconds\n  if (payload.exp < Date.now() / 1000) {\n    // Token has expired\n    localStorage.removeItem('token');\n    return null;\n  }\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem('token');\n}\n\n// import * as usersAPI from './users-api'\n\n// export async function signUp (userData) {\n//   // Delete the network request code to the\n//   // users-api.js module which will ultimately\n//   // return the JWT\n//   const token = await usersAPI.signUp(userData)\n//   // Persist the token to localStorage\n//   window.localStorage.setItem('token', token)\n//   return getUser()\n// }\n\n// export async function login (credentials) {\n//   const token = await usersAPI.login(credentials)\n//   // Persist the token to window.localStorage\n//   window.localStorage.setItem('token', token)\n//   return getUser()\n// }\n\n// export function getToken () {\n//   const token = window.localStorage.getItem('token')\n//   // getItem will return null if no key\n//   if (!token) return null\n//   const payload = JSON.parse(atob(token.split('.')[1]))\n//   // A JWT's expiration is expressed in seconds, not miliseconds\n//   if (payload.exp < Date.now() / 1000) {\n//     // Token has expired\n//     window.localStorage.removeItem('token')\n//     return null\n//   }\n//   return token\n// }\n\n// export function getUser () {\n//   const token = getToken()\n//   return token ? JSON.parse(atob(token.split('.')[1])).user : null\n// }\n\n// export function logOut () {\n//   window.localStorage.removeItem('token')\n// }","map":{"version":3,"names":["usersAPI","signUp","userData","token","localStorage","setItem","getUser","login","credentials","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"sources":["/Users/kennethpresedo/Desktop/software_homework/unit_3/espresso/src/utilities/users-service.js"],"sourcesContent":["import * as usersAPI  from './users-api';\n\nexport async function signUp(userData) {\n  // Delete the network request code to the\n  // users-api.js module which will ultimately\n  // return the JWT\n  const token = await usersAPI.signUp(userData);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\n\nexport async function login(credentials) {\n  const token = await usersAPI.login(credentials);\n  // Persist the token to localStorage\n  localStorage.setItem('token', token);\n  return getUser();\n}\n\nexport function getToken() {\n  const token = localStorage.getItem('token');\n  // getItem will return null if no key\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split('.')[1]));\n  // A JWT's expiration is expressed in seconds, not miliseconds\n  if (payload.exp < Date.now() / 1000) {\n    // Token has expired\n    localStorage.removeItem('token');\n    return null;\n  }\n  return token;\n}\n\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\n\nexport function logOut() {\n  localStorage.removeItem('token');\n}\n\n// import * as usersAPI from './users-api'\n\n// export async function signUp (userData) {\n//   // Delete the network request code to the\n//   // users-api.js module which will ultimately\n//   // return the JWT\n//   const token = await usersAPI.signUp(userData)\n//   // Persist the token to localStorage\n//   window.localStorage.setItem('token', token)\n//   return getUser()\n// }\n\n// export async function login (credentials) {\n//   const token = await usersAPI.login(credentials)\n//   // Persist the token to window.localStorage\n//   window.localStorage.setItem('token', token)\n//   return getUser()\n// }\n\n// export function getToken () {\n//   const token = window.localStorage.getItem('token')\n//   // getItem will return null if no key\n//   if (!token) return null\n//   const payload = JSON.parse(atob(token.split('.')[1]))\n//   // A JWT's expiration is expressed in seconds, not miliseconds\n//   if (payload.exp < Date.now() / 1000) {\n//     // Token has expired\n//     window.localStorage.removeItem('token')\n//     return null\n//   }\n//   return token\n// }\n\n// export function getUser () {\n//   const token = getToken()\n//   return token ? JSON.parse(atob(token.split('.')[1])).user : null\n// }\n\n// export function logOut () {\n//   window.localStorage.removeItem('token')\n// }"],"mappings":"AAAA,OAAO,KAAKA,QAAQ,MAAO,aAAa;AAExC,OAAO,eAAeC,MAAM,CAACC,QAAQ,EAAE;EACrC;EACA;EACA;EACA,MAAMC,KAAK,GAAG,MAAMH,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC;EAC7C;EACAE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,eAAeC,KAAK,CAACC,WAAW,EAAE;EACvC,MAAML,KAAK,GAAG,MAAMH,QAAQ,CAACO,KAAK,CAACC,WAAW,CAAC;EAC/C;EACAJ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;EACpC,OAAOG,OAAO,EAAE;AAClB;AAEA,OAAO,SAASG,QAAQ,GAAG;EACzB,MAAMN,KAAK,GAAGC,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,IAAI,CAACP,KAAK,EAAE,OAAO,IAAI;EACvB,MAAMQ,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD;EACA,IAAIJ,OAAO,CAACK,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAE;IACnC;IACAd,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;IAChC,OAAO,IAAI;EACb;EACA,OAAOhB,KAAK;AACd;AAEA,OAAO,SAASG,OAAO,GAAG;EACxB,MAAMH,KAAK,GAAGM,QAAQ,EAAE;EACxB,OAAON,KAAK,GAAGS,IAAI,CAACC,KAAK,CAACC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,IAAI,GAAG,IAAI;AAClE;AAEA,OAAO,SAASC,MAAM,GAAG;EACvBjB,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;AAClC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}